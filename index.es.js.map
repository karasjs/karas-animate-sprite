{"version":3,"file":"index.es.js","sources":["src/index.js"],"sourcesContent":["class Sprite extends karas.Component {\n  componentDidMount() {\n    let { nw, nh, delay = 0, duration = 1000, iterations = 1, fill } = this.props;\n    let total = nw * nh, count = 0, times = 0;\n    let sr = this.shadowRoot;\n    function cb(diff) {\n      if(delay > 0) {\n        delay -= diff;\n      }\n      if(delay > 0) {\n        return;\n      }\n      count += diff + delay;\n      delay = 0;\n      if(count >= duration) {\n        times++;\n        if(times >= iterations) {\n          sr.removeFrameAnimate(cb);\n          if(fill !== 'forwards') {\n            sr.updateStyle({\n              visibility: 'hidden',\n            });\n          }\n          return;\n        }\n        count = 0;\n      }\n      let i = Math.floor(count * total / duration);\n      sr.updateStyle({\n        backgroundPositionX: i % nw / (nw - 1) * 100 + '%',\n        backgroundPositionY: Math.floor(i / nw) / (nh - 1) * 100 + '%',\n        visibility: 'visible',\n      });\n    }\n    sr.frameAnimate(cb);\n  }\n\n  render() {\n    let nw = this.props.nw, nh = this.props.nh;\n    return <div style={{\n      backgroundRepeat: 'no-repeat',\n      backgroundPosition: '0 0',\n      backgroundSize: `${nw * 100}% ${nh * 100}%`,\n      visibility: 'hidden',\n    }}/>;\n  }\n}\n\nexport default Sprite;\n"],"names":["Sprite","props","nw","nh","delay","duration","iterations","fill","total","count","times","sr","shadowRoot","cb","diff","removeFrameAnimate","updateStyle","visibility","i","Math","floor","backgroundPositionX","backgroundPositionY","frameAnimate","backgroundRepeat","backgroundPosition","backgroundSize","karas","Component"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAAMA;;;;;;;;;;;;;WACJ,6BAAoB;AAClB,wBAAmE,KAAKC,KAAxE;AAAA,UAAMC,EAAN,eAAMA,EAAN;AAAA,UAAUC,EAAV,eAAUA,EAAV;AAAA,0CAAcC,KAAd;AAAA,UAAcA,KAAd,kCAAsB,CAAtB;AAAA,6CAAyBC,QAAzB;AAAA,UAAyBA,QAAzB,qCAAoC,IAApC;AAAA,8CAA0CC,UAA1C;AAAA,UAA0CA,UAA1C,sCAAuD,CAAvD;AAAA,UAA0DC,IAA1D,eAA0DA,IAA1D;AACA,UAAIC,KAAK,GAAGN,EAAE,GAAGC,EAAjB;AAAA,UAAqBM,KAAK,GAAG,CAA7B;AAAA,UAAgCC,KAAK,GAAG,CAAxC;AACA,UAAIC,EAAE,GAAG,KAAKC,UAAd;;AACA,eAASC,EAAT,CAAYC,IAAZ,EAAkB;AAChB,YAAGV,KAAK,GAAG,CAAX,EAAc;AACZA,UAAAA,KAAK,IAAIU,IAAT;AACD;;AACD,YAAGV,KAAK,GAAG,CAAX,EAAc;AACZ;AACD;;AACDK,QAAAA,KAAK,IAAIK,IAAI,GAAGV,KAAhB;AACAA,QAAAA,KAAK,GAAG,CAAR;;AACA,YAAGK,KAAK,IAAIJ,QAAZ,EAAsB;AACpBK,UAAAA,KAAK;;AACL,cAAGA,KAAK,IAAIJ,UAAZ,EAAwB;AACtBK,YAAAA,EAAE,CAACI,kBAAH,CAAsBF,EAAtB;;AACA,gBAAGN,IAAI,KAAK,UAAZ,EAAwB;AACtBI,cAAAA,EAAE,CAACK,WAAH,CAAe;AACbC,gBAAAA,UAAU,EAAE;AADC,eAAf;AAGD;;AACD;AACD;;AACDR,UAAAA,KAAK,GAAG,CAAR;AACD;;AACD,YAAIS,CAAC,GAAGC,IAAI,CAACC,KAAL,CAAWX,KAAK,GAAGD,KAAR,GAAgBH,QAA3B,CAAR;AACAM,QAAAA,EAAE,CAACK,WAAH,CAAe;AACbK,UAAAA,mBAAmB,EAAEH,CAAC,GAAGhB,EAAJ,IAAUA,EAAE,GAAG,CAAf,IAAoB,GAApB,GAA0B,GADlC;AAEboB,UAAAA,mBAAmB,EAAEH,IAAI,CAACC,KAAL,CAAWF,CAAC,GAAGhB,EAAf,KAAsBC,EAAE,GAAG,CAA3B,IAAgC,GAAhC,GAAsC,GAF9C;AAGbc,UAAAA,UAAU,EAAE;AAHC,SAAf;AAKD;;AACDN,MAAAA,EAAE,CAACY,YAAH,CAAgBV,EAAhB;AACD;;;WAED,kBAAS;AACP,UAAIX,EAAE,GAAG,KAAKD,KAAL,CAAWC,EAApB;AAAA,UAAwBC,EAAE,GAAG,KAAKF,KAAL,CAAWE,EAAxC;AACA,aAAO;AAAK,QAAA,KAAK,EAAE;AACjBqB,UAAAA,gBAAgB,EAAE,WADD;AAEjBC,UAAAA,kBAAkB,EAAE,KAFH;AAGjBC,UAAAA,cAAc,YAAKxB,EAAE,GAAG,GAAV,eAAkBC,EAAE,GAAG,GAAvB,MAHG;AAIjBc,UAAAA,UAAU,EAAE;AAJK;AAAZ,QAAP;AAMD;;;;EA7CkBU,KAAK,CAACC;;;;"}